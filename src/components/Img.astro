---
// 記事中の画像を適切なサイズで表示します。
//
// 用意する画像サイズはモバイル幅〜デスクトップ幅とデスクトップ幅の2倍幅です。
// 2倍幅は高dpiデバイスでの表示用です。
//
// sizesの928pxは記事表示領域がギリギリ縮まないときの画面幅です。
// これより大きい画面では記事表示領域が830pxになるため、830pxを最大幅としています。
// これより小さい画面では記事表示領域も縮まるため、100vwとしています。(ビューポート幅とpxしか指定できないため)

import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
	src: ImageMetadata | string;
	alt: string;
	title?: string;
}

const { src, alt, title } = Astro.props;
---

{
	typeof src !== "string" ? (
		<Image
			src={src}
			widths={[
				324, // モバイル幅
				690, // タブレット幅
				830, // デスクトップ幅
				830 * 2, // デスクトップ幅(2倍)
			]}
			sizes="(max-width: 928px) 100vw, 830px"
			alt={alt}
			title={title}
		/>
	) : (
		<Image inferSize src={src} alt={alt} title={title} />
	)
}
