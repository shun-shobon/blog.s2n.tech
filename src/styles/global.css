@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
	--color-text-primary: var(--color-neutral-800);
	--color-text-secondary: var(--color-neutral-600);
	--color-text-heading: var(--color-neutral-950);
	--color-text-decoration: var(--color-neutral-500);
	--color-background-primary: var(--color-white);
	--color-background-secondary: var(--color-neutral-100);
	--color-background-tertiary: var(--color-neutral-200);
	--color-border-primary: var(--color-neutral-100);
	--color-border-secondary: var(--color-neutral-200);

	--font-cursive: var(--font-family-caveat), cursive, sans-serif;

	--leading-*: initial;
	--leading-tight: 1.25;
	--leading-normal: 1.5;
	--leading-relaxed: 2;

	--bg-grid:
		linear-gradient(0deg, var(--color-border-primary) 1px, transparent 1px),
		linear-gradient(90deg, var(--color-border-primary) 1px, transparent 1px);
}

@layer base {
	/* ボタンのデフォルトのカーソルをポインターに変更 */
	button:not(:disabled),
	[role="button"]:not(:disabled) {
		cursor: pointer;
	}
}

@utility markdown {
	@apply wrap-anywhere;
	line-break: strict;
	hanging-punctuation: allow-end;

	/* インライン要素 */
	:where(a):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply underline underline-offset-2 decoration-text-decoration;
	}
	:where(strong):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply font-bold;
	}
	:where(em):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply italic;
	}
	:where(code):not(:where(pre > code)):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply bg-background-secondary rounded px-1 py-0.5 font-mono;
	}
	:where(del):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply line-through decoration-text-decoration;
	}

	/* ブロック要素 */
	:where(p):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-4;
	}
	:where(blockquote):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-text-secondary border-l-4 border-border-secondary pl-4 my-4;
	}
	:where(.expressive-code):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-4 border border-border-primary rounded-lg;
	}
	:where(hr):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-t border-border-secondary my-8;
	}

	/* リスト */
	:where(ol):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-4 pl-6 list-decimal;
	}
	:where(ul):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-4 pl-6 list-disc;
	}
	:where(li):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-2;
	}
	:where(ol > li, ul > li):not(:where([class~="not-markdown"], [class~="not-markdown"] *))::marker {
		@apply text-text-secondary
	}
	:where(ol ol, ul ul, ol ul, ul ol):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-2;
	}

	/* テーブル */
	:where(table):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-4 w-full table-auto text-sm;
	}
	:where(thead):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-b border-border-secondary;
	}
	:where(thead th):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply font-bold px-2 pb-1.5;
	}
	:where(tbody tr):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-b border-border-secondary;
	}
	:where(tbody tr:last-child):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-b-0;
	}
	:where(tbody td):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply align-baseline;
	}
	:where(tfoot):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-t border-border-secondary;
	}
	:where(tfoot td):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply align-top;
	}
	:where(th, td):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-left;
	}
	:where(tbody td, tfoot td):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply px-2 py-1.5;
	}
	:where(tbody tr:last-child td, tfoot tr:last-child td):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply pb-0;
	}

	/* 見出し */
	:where(h1, h2, h3, h4, h5, h6):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-pretty text-text-heading;
		font-feature-settings: "palt" 1;
	}
	:where(h1, h2, h3, h4):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply font-bold py-0.5 border-b border-l-8 border-border-secondary pl-2;
	}
	:where(h1, h2):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-2xl mt-10 mb-8;
	}
	:where(h3):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-xl mt-8 mb-6;
	}
	:where(h4):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply text-lg mt-6 mb-4;
	}
	:where(h5):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply font-bold py-0.5 border-b border-border-secondary pl-2 mt-6 mb-4;
	}
	:where(h6):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply py-0.5 border-b border-border-secondary pl-2 mt-6 mb-4;
	}
	:where(h1 + *, h2 + *, h3 + *, h4 + *, h5 + *, h6 + *):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply mt-0;
	}

	/* 注釈 */
	:where(.footnotes):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply border-t border-border-secondary mt-8;
	}
	:where(.footnotes h2):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply sr-only;
	}
	:where(.footnotes ol):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply mt-8 mb-0 text-sm;
	}
	:where(.footnotes ol li p):not(:where([class~="not-markdown"], [class~="not-markdown"] *)) {
		@apply my-0;
	}

	/* 最初の要素はマージンを0にする */
  & > *:first-child {
		@apply mt-0;
	}

	/* 最後の要素はマージンを0にする */
  & > *:last-child {
		@apply mb-0;
	}
}

